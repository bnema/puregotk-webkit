// Package webkit was automatically generated by github.com/jwijenbergh/puregotk DO NOT EDIT
package webkit

import (
	"structs"
	"unsafe"

	"github.com/jwijenbergh/purego"
	"github.com/jwijenbergh/puregotk/pkg/core"
	"github.com/jwijenbergh/puregotk/v4/gio"
	"github.com/jwijenbergh/puregotk/v4/glib"
	"github.com/jwijenbergh/puregotk/v4/gobject"
	"github.com/jwijenbergh/puregotk/v4/gobject/types"
)

type WebResourceClass struct {
	_ structs.HostLayout

	ParentClass gobject.ObjectClass
}

func (x *WebResourceClass) GoPointer() uintptr {
	return uintptr(unsafe.Pointer(x))
}

// Represents a resource at the end of a URI.
//
// A #WebKitWebResource encapsulates content for each resource at the
// end of a particular URI. For example, one #WebKitWebResource will
// be created for each separate image and stylesheet when a page is
// loaded.
//
// You can access the response and the URI for a given
// #WebKitWebResource, using webkit_web_resource_get_uri() and
// webkit_web_resource_get_response(), as well as the raw data, using
// webkit_web_resource_get_data().
type WebResource struct {
	gobject.Object
}

var xWebResourceGLibType func() types.GType

func WebResourceGLibType() types.GType {
	return xWebResourceGLibType()
}

func WebResourceNewFromInternalPtr(ptr uintptr) *WebResource {
	cls := &WebResource{}
	cls.Ptr = ptr
	return cls
}

var xWebResourceGetData func(uintptr, uintptr, uintptr, uintptr)

// Asynchronously get the raw data for @resource.
//
// When the operation is finished, @callback will be called. You can then call
// webkit_web_resource_get_data_finish() to get the result of the operation.
func (x *WebResource) GetData(CancellableVar *gio.Cancellable, CallbackVar *gio.AsyncReadyCallback, UserDataVar uintptr) {

	var CallbackVarRef uintptr
	if CallbackVar != nil {
		CallbackVarPtr := uintptr(unsafe.Pointer(CallbackVar))
		if cbRefPtr, ok := glib.GetCallback(CallbackVarPtr); ok {
			CallbackVarRef = cbRefPtr
		} else {
			fcb := func(arg0 uintptr, arg1 uintptr, arg2 uintptr) {
				cbFn := *CallbackVar
				cbFn(arg0, arg1, arg2)
			}
			CallbackVarRef = purego.NewCallback(fcb)
			glib.SaveCallbackWithClosure(CallbackVarPtr, CallbackVarRef, CallbackVar)
		}
	}

	xWebResourceGetData(x.GoPointer(), CancellableVar.GoPointer(), CallbackVarRef, UserDataVar)

}

var xWebResourceGetDataFinish func(uintptr, uintptr, *uint, **glib.Error) uintptr

// Finish an asynchronous operation started with webkit_web_resource_get_data().
func (x *WebResource) GetDataFinish(ResultVar gio.AsyncResult, LengthVar *uint) (uintptr, error) {
	var cerr *glib.Error

	cret := xWebResourceGetDataFinish(x.GoPointer(), ResultVar.GoPointer(), LengthVar, &cerr)

	if cerr == nil {
		return cret, nil
	}
	return cret, cerr

}

var xWebResourceGetResponse func(uintptr) uintptr

// Retrieves the #WebKitURIResponse of the resource load operation.
//
// This method returns %NULL if called before the response
// is received from the server. You can connect to notify::response
// signal to be notified when the response is received.
func (x *WebResource) GetResponse() *URIResponse {
	var cls *URIResponse

	cret := xWebResourceGetResponse(x.GoPointer())

	if cret == 0 {
		return nil
	}
	gobject.IncreaseRef(cret)
	cls = &URIResponse{}
	cls.Ptr = cret
	return cls
}

var xWebResourceGetUri func(uintptr) string

// Returns the current active URI of @resource.
//
// The active URI might change during
// a load operation:
//
// &lt;orderedlist&gt;
// &lt;listitem&gt;&lt;para&gt;
//
//	When the resource load starts, the active URI is the requested URI
//
// &lt;/para&gt;&lt;/listitem&gt;
// &lt;listitem&gt;&lt;para&gt;
//
//	When the initial request is sent to the server, #WebKitWebResource::sent-request
//	signal is emitted without a redirected response, the active URI is the URI of
//	the request sent to the server.
//
// &lt;/para&gt;&lt;/listitem&gt;
// &lt;listitem&gt;&lt;para&gt;
//
//	In case of a server redirection, #WebKitWebResource::sent-request signal
//	is emitted again with a redirected response, the active URI is the URI the request
//	was redirected to.
//
// &lt;/para&gt;&lt;/listitem&gt;
// &lt;listitem&gt;&lt;para&gt;
//
//	When the response is received from the server, the active URI is the final
//	one and it will not change again.
//
// &lt;/para&gt;&lt;/listitem&gt;
// &lt;/orderedlist&gt;
//
// You can monitor the active URI by connecting to the notify::uri
// signal of @resource.
func (x *WebResource) GetUri() string {

	cret := xWebResourceGetUri(x.GoPointer())

	return cret
}

func (c *WebResource) GoPointer() uintptr {
	if c == nil {
		return 0
	}
	return c.Ptr
}

func (c *WebResource) SetGoPointer(ptr uintptr) {
	c.Ptr = ptr
}

// GetPropertyUri gets the "uri" property.
// The current active URI of the #WebKitWebResource.
// See webkit_web_resource_get_uri() for more details.
func (x *WebResource) GetPropertyUri() string {
	var v gobject.Value
	x.GetProperty("uri", &v)
	return v.GetString()
}

// This signal is emitted when an error occurs during the resource
// load operation.
func (x *WebResource) ConnectFailed(cb *func(WebResource, uintptr)) uint32 {
	cbPtr := uintptr(unsafe.Pointer(cb))
	if cbRefPtr, ok := glib.GetCallback(cbPtr); ok {
		return gobject.SignalConnect(x.GoPointer(), "failed", cbRefPtr)
	}

	fcb := func(clsPtr uintptr, ErrorVarp uintptr) {
		fa := WebResource{}
		fa.Ptr = clsPtr
		cbFn := *cb

		cbFn(fa, ErrorVarp)

	}
	cbRefPtr := purego.NewCallback(fcb)
	glib.SaveCallbackWithClosure(cbPtr, cbRefPtr, cb)
	return gobject.SignalConnect(x.GoPointer(), "failed", cbRefPtr)
}

// This signal is emitted when a TLS error occurs during the resource load operation.
func (x *WebResource) ConnectFailedWithTlsErrors(cb *func(WebResource, uintptr, gio.TlsCertificateFlags)) uint32 {
	cbPtr := uintptr(unsafe.Pointer(cb))
	if cbRefPtr, ok := glib.GetCallback(cbPtr); ok {
		return gobject.SignalConnect(x.GoPointer(), "failed-with-tls-errors", cbRefPtr)
	}

	fcb := func(clsPtr uintptr, CertificateVarp uintptr, ErrorsVarp gio.TlsCertificateFlags) {
		fa := WebResource{}
		fa.Ptr = clsPtr
		cbFn := *cb

		cbFn(fa, CertificateVarp, ErrorsVarp)

	}
	cbRefPtr := purego.NewCallback(fcb)
	glib.SaveCallbackWithClosure(cbPtr, cbRefPtr, cb)
	return gobject.SignalConnect(x.GoPointer(), "failed-with-tls-errors", cbRefPtr)
}

// This signal is emitted when the resource load finishes successfully
// or due to an error. In case of errors #WebKitWebResource::failed signal
// is emitted before this one.
func (x *WebResource) ConnectFinished(cb *func(WebResource)) uint32 {
	cbPtr := uintptr(unsafe.Pointer(cb))
	if cbRefPtr, ok := glib.GetCallback(cbPtr); ok {
		return gobject.SignalConnect(x.GoPointer(), "finished", cbRefPtr)
	}

	fcb := func(clsPtr uintptr) {
		fa := WebResource{}
		fa.Ptr = clsPtr
		cbFn := *cb

		cbFn(fa)

	}
	cbRefPtr := purego.NewCallback(fcb)
	glib.SaveCallbackWithClosure(cbPtr, cbRefPtr, cb)
	return gobject.SignalConnect(x.GoPointer(), "finished", cbRefPtr)
}

// This signal is emitted when @request has been sent to the
// server. In case of a server redirection this signal is
// emitted again with the @request argument containing the new
// request sent to the server due to the redirection and the
// @redirected_response parameter containing the response
// received by the server for the initial request.
func (x *WebResource) ConnectSentRequest(cb *func(WebResource, uintptr, uintptr)) uint32 {
	cbPtr := uintptr(unsafe.Pointer(cb))
	if cbRefPtr, ok := glib.GetCallback(cbPtr); ok {
		return gobject.SignalConnect(x.GoPointer(), "sent-request", cbRefPtr)
	}

	fcb := func(clsPtr uintptr, RequestVarp uintptr, RedirectedResponseVarp uintptr) {
		fa := WebResource{}
		fa.Ptr = clsPtr
		cbFn := *cb

		cbFn(fa, RequestVarp, RedirectedResponseVarp)

	}
	cbRefPtr := purego.NewCallback(fcb)
	glib.SaveCallbackWithClosure(cbPtr, cbRefPtr, cb)
	return gobject.SignalConnect(x.GoPointer(), "sent-request", cbRefPtr)
}

func init() {
	core.SetPackageName("WEBKIT", "webkitgtk-6.0")
	core.SetSharedLibraries("WEBKIT", []string{"libwebkitgtk-6.0.so.4", "libjavascriptcoregtk-6.0.so.1"})
	var libs []uintptr
	for _, libPath := range core.GetPaths("WEBKIT") {
		lib, err := purego.Dlopen(libPath, purego.RTLD_NOW|purego.RTLD_GLOBAL)
		if err != nil {
			panic(err)
		}
		libs = append(libs, lib)
	}

	core.PuregoSafeRegister(&xWebResourceGLibType, libs, "webkit_web_resource_get_type")

	core.PuregoSafeRegister(&xWebResourceGetData, libs, "webkit_web_resource_get_data")
	core.PuregoSafeRegister(&xWebResourceGetDataFinish, libs, "webkit_web_resource_get_data_finish")
	core.PuregoSafeRegister(&xWebResourceGetResponse, libs, "webkit_web_resource_get_response")
	core.PuregoSafeRegister(&xWebResourceGetUri, libs, "webkit_web_resource_get_uri")

}
