// Package webkit was automatically generated by github.com/jwijenbergh/puregotk DO NOT EDIT
package webkit

import (
	"structs"
	"unsafe"

	"github.com/bnema/puregotk-webkit/javascriptcore"
	"github.com/jwijenbergh/purego"
	"github.com/jwijenbergh/puregotk/pkg/core"
	"github.com/jwijenbergh/puregotk/v4/glib"
	"github.com/jwijenbergh/puregotk/v4/gobject"
	"github.com/jwijenbergh/puregotk/v4/gobject/types"
)

// A reply for a script message received.
// If no reply has been sent by the user, an automatically generated reply with
// undefined value with be sent.
type ScriptMessageReply struct {
	_ structs.HostLayout
}

var xScriptMessageReplyGLibType func() types.GType

func ScriptMessageReplyGLibType() types.GType {
	return xScriptMessageReplyGLibType()
}

func (x *ScriptMessageReply) GoPointer() uintptr {
	return uintptr(unsafe.Pointer(x))
}

var xScriptMessageReplyRef func(uintptr) uintptr

// Atomically increments the reference count of @script_message_reply by one.
func (x *ScriptMessageReply) Ref() uintptr {

	cret := xScriptMessageReplyRef(x.GoPointer())
	return cret
}

var xScriptMessageReplyReturnErrorMessage func(uintptr, string)

// Reply to a script message with an error message.
func (x *ScriptMessageReply) ReturnErrorMessage(ErrorMessageVar string) {

	xScriptMessageReplyReturnErrorMessage(x.GoPointer(), ErrorMessageVar)

}

var xScriptMessageReplyReturnValue func(uintptr, uintptr)

// Reply to a script message with a value.
//
// This function can be called twice for passing the reply value in.
func (x *ScriptMessageReply) ReturnValue(ReplyValueVar *javascriptcore.Value) {

	xScriptMessageReplyReturnValue(x.GoPointer(), ReplyValueVar.GoPointer())

}

var xScriptMessageReplyUnref func(uintptr)

// Atomically decrements the reference count of @script_message_reply by one.
//
// If the reference count drops to 0, all the memory allocated by the
// #WebKitScriptMessageReply is released. This function is MT-safe and may
// be called from any thread.
func (x *ScriptMessageReply) Unref() {

	xScriptMessageReplyUnref(x.GoPointer())

}

type UserContentManagerClass struct {
	_ structs.HostLayout

	ParentClass gobject.ObjectClass
}

func (x *UserContentManagerClass) GoPointer() uintptr {
	return uintptr(unsafe.Pointer(x))
}

// Manages user-defined content which affects web pages.
//
// Using a #WebKitUserContentManager user CSS style sheets can be set to
// be injected in the web pages loaded by a #WebKitWebView, by
// webkit_user_content_manager_add_style_sheet().
//
// To use a #WebKitUserContentManager, it must be created using
// webkit_user_content_manager_new(), and then used to construct
// a #WebKitWebView. User style sheets can be created with
// webkit_user_style_sheet_new().
//
// User style sheets can be added and removed at any time, but
// they will affect the web pages loaded afterwards.
type UserContentManager struct {
	gobject.Object
}

var xUserContentManagerGLibType func() types.GType

func UserContentManagerGLibType() types.GType {
	return xUserContentManagerGLibType()
}

func UserContentManagerNewFromInternalPtr(ptr uintptr) *UserContentManager {
	cls := &UserContentManager{}
	cls.Ptr = ptr
	return cls
}

var xNewUserContentManager func() uintptr

// Creates a new user content manager.
func NewUserContentManager() *UserContentManager {
	var cls *UserContentManager

	cret := xNewUserContentManager()

	if cret == 0 {
		return nil
	}
	cls = &UserContentManager{}
	cls.Ptr = cret
	return cls
}

var xUserContentManagerAddFilter func(uintptr, uintptr)

// Adds a #WebKitUserContentFilter to the given #WebKitUserContentManager.
//
// The same #WebKitUserContentFilter can be reused with multiple
// #WebKitUserContentManager instances.
//
// Filters need to be saved and loaded from #WebKitUserContentFilterStore.
func (x *UserContentManager) AddFilter(FilterVar uintptr) {

	xUserContentManagerAddFilter(x.GoPointer(), FilterVar)

}

var xUserContentManagerAddScript func(uintptr, uintptr)

// Adds a #WebKitUserScript to the given #WebKitUserContentManager.
//
// The same #WebKitUserScript can be reused with multiple
// #WebKitUserContentManager instances.
func (x *UserContentManager) AddScript(ScriptVar uintptr) {

	xUserContentManagerAddScript(x.GoPointer(), ScriptVar)

}

var xUserContentManagerAddStyleSheet func(uintptr, uintptr)

// Adds a #WebKitUserStyleSheet to the given #WebKitUserContentManager.
//
// The same #WebKitUserStyleSheet can be reused with multiple
// #WebKitUserContentManager instances.
func (x *UserContentManager) AddStyleSheet(StylesheetVar uintptr) {

	xUserContentManagerAddStyleSheet(x.GoPointer(), StylesheetVar)

}

var xUserContentManagerRegisterScriptMessageHandler func(uintptr, string, string) bool

// Registers a new user script message handler in script world.
//
// After it is registered,
// scripts can use `window.webkit.messageHandlers.&lt;name&gt;.postMessage(value)`
// to send messages. Those messages are received by connecting handlers
// to the #WebKitUserContentManager::script-message-received signal. The
// handler name is used as the detail of the signal. To avoid race
// conditions between registering the handler name, and starting to
// receive the signals, it is recommended to connect to the signal
// *before* registering the handler name:
//
// ```c
// WebKitWebView *view = webkit_web_view_new ();
// WebKitUserContentManager *manager = webkit_web_view_get_user_content_manager ();
// g_signal_connect (manager, "script-message-received::foobar",
//
//	G_CALLBACK (handle_script_message), NULL);
//
// webkit_user_content_manager_register_script_message_handler (manager, "foobar");
// ```
//
// Registering a script message handler will fail if the requested
// name has been already registered before.
//
// If %NULL is passed as the @world_name, the default world will be used.
//
// The registered handler can be unregistered by using
// webkit_user_content_manager_unregister_script_message_handler().
func (x *UserContentManager) RegisterScriptMessageHandler(NameVar string, WorldNameVar string) bool {

	cret := xUserContentManagerRegisterScriptMessageHandler(x.GoPointer(), NameVar, WorldNameVar)
	return cret
}

var xUserContentManagerRegisterScriptMessageHandlerWithReply func(uintptr, string, string) bool

// Registers a new user script message handler in script world with name @world_name.
//
// Different from webkit_user_content_manager_register_script_message_handler(),
// when using this function to register the handler, the connected signal is
// script-message-with-reply-received, and a reply provided by the user is expected.
// Otherwise, the user will receive a default undefined value.
//
// If %NULL is passed as the @world_name, the default world will be used.
// See webkit_user_content_manager_register_script_message_handler() for full description.
//
// Registering a script message handler will fail if the requested
// name has been already registered before.
//
// The registered handler can be unregistered by using
// webkit_user_content_manager_unregister_script_message_handler().
func (x *UserContentManager) RegisterScriptMessageHandlerWithReply(NameVar string, WorldNameVar string) bool {

	cret := xUserContentManagerRegisterScriptMessageHandlerWithReply(x.GoPointer(), NameVar, WorldNameVar)
	return cret
}

var xUserContentManagerRemoveAllFilters func(uintptr)

// Removes all content filters from the given #WebKitUserContentManager.
func (x *UserContentManager) RemoveAllFilters() {

	xUserContentManagerRemoveAllFilters(x.GoPointer())

}

var xUserContentManagerRemoveAllScripts func(uintptr)

// Removes all user scripts from the given #WebKitUserContentManager
//
// See also webkit_user_content_manager_remove_script().
func (x *UserContentManager) RemoveAllScripts() {

	xUserContentManagerRemoveAllScripts(x.GoPointer())

}

var xUserContentManagerRemoveAllStyleSheets func(uintptr)

// Removes all user style sheets from the given #WebKitUserContentManager.
func (x *UserContentManager) RemoveAllStyleSheets() {

	xUserContentManagerRemoveAllStyleSheets(x.GoPointer())

}

var xUserContentManagerRemoveFilter func(uintptr, uintptr)

// Removes a filter from the given #WebKitUserContentManager.
//
// Since 2.24
func (x *UserContentManager) RemoveFilter(FilterVar uintptr) {

	xUserContentManagerRemoveFilter(x.GoPointer(), FilterVar)

}

var xUserContentManagerRemoveFilterById func(uintptr, string)

// Removes a filter by the given identifier.
//
// Removes a filter from the given #WebKitUserContentManager given the
// identifier of a #WebKitUserContentFilter as returned by
// webkit_user_content_filter_get_identifier().
func (x *UserContentManager) RemoveFilterById(FilterIdVar string) {

	xUserContentManagerRemoveFilterById(x.GoPointer(), FilterIdVar)

}

var xUserContentManagerRemoveScript func(uintptr, uintptr)

// Removes a #WebKitUserScript from the given #WebKitUserContentManager.
//
// See also webkit_user_content_manager_remove_all_scripts().
func (x *UserContentManager) RemoveScript(ScriptVar uintptr) {

	xUserContentManagerRemoveScript(x.GoPointer(), ScriptVar)

}

var xUserContentManagerRemoveStyleSheet func(uintptr, uintptr)

// Removes a #WebKitUserStyleSheet from the given #WebKitUserContentManager.
//
// See also webkit_user_content_manager_remove_all_style_sheets().
func (x *UserContentManager) RemoveStyleSheet(StylesheetVar uintptr) {

	xUserContentManagerRemoveStyleSheet(x.GoPointer(), StylesheetVar)

}

var xUserContentManagerUnregisterScriptMessageHandler func(uintptr, string, string)

// Unregisters a previously registered message handler in script world with name @world_name.
// If %NULL is passed as the @world_name, the default world will be used.
//
// Note that this does *not* disconnect handlers for the
// #WebKitUserContentManager::script-message-received signal;
// they will be kept connected, but the signal will not be emitted
// unless the handler name is registered again.
//
// See also webkit_user_content_manager_register_script_message_handler().
func (x *UserContentManager) UnregisterScriptMessageHandler(NameVar string, WorldNameVar string) {

	xUserContentManagerUnregisterScriptMessageHandler(x.GoPointer(), NameVar, WorldNameVar)

}

func (c *UserContentManager) GoPointer() uintptr {
	if c == nil {
		return 0
	}
	return c.Ptr
}

func (c *UserContentManager) SetGoPointer(ptr uintptr) {
	c.Ptr = ptr
}

// This signal is emitted when JavaScript in a web view calls
// &lt;code&gt;window.webkit.messageHandlers.&lt;name&gt;.postMessage()&lt;/code&gt;, after registering
// &lt;code&gt;&lt;name&gt;&lt;/code&gt; using
// webkit_user_content_manager_register_script_message_handler()
func (x *UserContentManager) ConnectScriptMessageReceived(cb *func(UserContentManager, uintptr)) uint32 {
	cbPtr := uintptr(unsafe.Pointer(cb))
	if cbRefPtr, ok := glib.GetCallback(cbPtr); ok {
		return gobject.SignalConnect(x.GoPointer(), "script-message-received", cbRefPtr)
	}

	fcb := func(clsPtr uintptr, ValueVarp uintptr) {
		fa := UserContentManager{}
		fa.Ptr = clsPtr
		cbFn := *cb

		cbFn(fa, ValueVarp)

	}
	cbRefPtr := purego.NewCallback(fcb)
	glib.SaveCallback(cbPtr, cbRefPtr)
	return gobject.SignalConnect(x.GoPointer(), "script-message-received", cbRefPtr)
}

// This signal is emitted when JavaScript in a web view calls
// &lt;code&gt;window.webkit.messageHandlers.&lt;name&gt;.postMessage()&lt;/code&gt;, after registering
// &lt;code&gt;&lt;name&gt;&lt;/code&gt; using
// webkit_user_content_manager_register_script_message_handler_with_reply()
//
// The given @reply can be used to send a return value with
// webkit_script_message_reply_return_value() or an error message with
// webkit_script_message_reply_return_error_message(). If none of them are
// called, an automatic reply with an undefined value will be sent.
//
// It is possible to handle the reply asynchronously, by simply calling
// g_object_ref() on the @reply and returning %TRUE.
func (x *UserContentManager) ConnectScriptMessageWithReplyReceived(cb *func(UserContentManager, uintptr, uintptr) bool) uint32 {
	cbPtr := uintptr(unsafe.Pointer(cb))
	if cbRefPtr, ok := glib.GetCallback(cbPtr); ok {
		return gobject.SignalConnect(x.GoPointer(), "script-message-with-reply-received", cbRefPtr)
	}

	fcb := func(clsPtr uintptr, ValueVarp uintptr, ReplyVarp uintptr) bool {
		fa := UserContentManager{}
		fa.Ptr = clsPtr
		cbFn := *cb

		return cbFn(fa, ValueVarp, ReplyVarp)

	}
	cbRefPtr := purego.NewCallback(fcb)
	glib.SaveCallback(cbPtr, cbRefPtr)
	return gobject.SignalConnect(x.GoPointer(), "script-message-with-reply-received", cbRefPtr)
}

func init() {
	core.SetPackageName("WEBKIT", "webkitgtk-6.0")
	core.SetSharedLibraries("WEBKIT", []string{"libwebkitgtk-6.0.so.4", "libjavascriptcoregtk-6.0.so.1"})
	var libs []uintptr
	for _, libPath := range core.GetPaths("WEBKIT") {
		lib, err := purego.Dlopen(libPath, purego.RTLD_NOW|purego.RTLD_GLOBAL)
		if err != nil {
			panic(err)
		}
		libs = append(libs, lib)
	}

	core.PuregoSafeRegister(&xScriptMessageReplyGLibType, libs, "webkit_script_message_reply_get_type")

	core.PuregoSafeRegister(&xScriptMessageReplyRef, libs, "webkit_script_message_reply_ref")
	core.PuregoSafeRegister(&xScriptMessageReplyReturnErrorMessage, libs, "webkit_script_message_reply_return_error_message")
	core.PuregoSafeRegister(&xScriptMessageReplyReturnValue, libs, "webkit_script_message_reply_return_value")
	core.PuregoSafeRegister(&xScriptMessageReplyUnref, libs, "webkit_script_message_reply_unref")

	core.PuregoSafeRegister(&xUserContentManagerGLibType, libs, "webkit_user_content_manager_get_type")

	core.PuregoSafeRegister(&xNewUserContentManager, libs, "webkit_user_content_manager_new")

	core.PuregoSafeRegister(&xUserContentManagerAddFilter, libs, "webkit_user_content_manager_add_filter")
	core.PuregoSafeRegister(&xUserContentManagerAddScript, libs, "webkit_user_content_manager_add_script")
	core.PuregoSafeRegister(&xUserContentManagerAddStyleSheet, libs, "webkit_user_content_manager_add_style_sheet")
	core.PuregoSafeRegister(&xUserContentManagerRegisterScriptMessageHandler, libs, "webkit_user_content_manager_register_script_message_handler")
	core.PuregoSafeRegister(&xUserContentManagerRegisterScriptMessageHandlerWithReply, libs, "webkit_user_content_manager_register_script_message_handler_with_reply")
	core.PuregoSafeRegister(&xUserContentManagerRemoveAllFilters, libs, "webkit_user_content_manager_remove_all_filters")
	core.PuregoSafeRegister(&xUserContentManagerRemoveAllScripts, libs, "webkit_user_content_manager_remove_all_scripts")
	core.PuregoSafeRegister(&xUserContentManagerRemoveAllStyleSheets, libs, "webkit_user_content_manager_remove_all_style_sheets")
	core.PuregoSafeRegister(&xUserContentManagerRemoveFilter, libs, "webkit_user_content_manager_remove_filter")
	core.PuregoSafeRegister(&xUserContentManagerRemoveFilterById, libs, "webkit_user_content_manager_remove_filter_by_id")
	core.PuregoSafeRegister(&xUserContentManagerRemoveScript, libs, "webkit_user_content_manager_remove_script")
	core.PuregoSafeRegister(&xUserContentManagerRemoveStyleSheet, libs, "webkit_user_content_manager_remove_style_sheet")
	core.PuregoSafeRegister(&xUserContentManagerUnregisterScriptMessageHandler, libs, "webkit_user_content_manager_unregister_script_message_handler")

}
