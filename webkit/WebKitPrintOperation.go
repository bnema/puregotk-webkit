// Package webkit was automatically generated by github.com/jwijenbergh/puregotk DO NOT EDIT
package webkit

import (
	"structs"
	"unsafe"

	"github.com/jwijenbergh/purego"
	"github.com/jwijenbergh/puregotk/pkg/core"
	"github.com/jwijenbergh/puregotk/v4/glib"
	"github.com/jwijenbergh/puregotk/v4/gobject"
	"github.com/jwijenbergh/puregotk/v4/gobject/types"
	"github.com/jwijenbergh/puregotk/v4/gtk"
)

type PrintOperationClass struct {
	_ structs.HostLayout

	ParentClass gobject.ObjectClass
}

func (x *PrintOperationClass) GoPointer() uintptr {
	return uintptr(unsafe.Pointer(x))
}

// Enum values representing the response of the print dialog shown with
// webkit_print_operation_run_dialog().
type PrintOperationResponse int

var xPrintOperationResponseGLibType func() types.GType

func PrintOperationResponseGLibType() types.GType {
	return xPrintOperationResponseGLibType()
}

const (

	// Print button was clicked in print dialog
	PrintOperationResponsePrintValue PrintOperationResponse = 0
	// Print dialog was cancelled
	PrintOperationResponseCancelValue PrintOperationResponse = 1
)

// Controls a print operation.
//
// A #WebKitPrintOperation controls a print operation in WebKit. With
// a similar API to #GtkPrintOperation, it lets you set the print
// settings with webkit_print_operation_set_print_settings() or
// display the print dialog with webkit_print_operation_run_dialog().
type PrintOperation struct {
	gobject.Object
}

var xPrintOperationGLibType func() types.GType

func PrintOperationGLibType() types.GType {
	return xPrintOperationGLibType()
}

func PrintOperationNewFromInternalPtr(ptr uintptr) *PrintOperation {
	cls := &PrintOperation{}
	cls.Ptr = ptr
	return cls
}

var xNewPrintOperation func(uintptr) uintptr

// Create a new #WebKitPrintOperation to print @web_view contents.
func NewPrintOperation(WebViewVar *WebView) *PrintOperation {
	var cls *PrintOperation

	cret := xNewPrintOperation(WebViewVar.GoPointer())

	if cret == 0 {
		return nil
	}
	cls = &PrintOperation{}
	cls.Ptr = cret
	return cls
}

var xPrintOperationGetPageSetup func(uintptr) uintptr

// Return the current page setup of @print_operation.
//
// It returns %NULL until
// either webkit_print_operation_set_page_setup() or webkit_print_operation_run_dialog()
// have been called.
func (x *PrintOperation) GetPageSetup() *gtk.PageSetup {
	var cls *gtk.PageSetup

	cret := xPrintOperationGetPageSetup(x.GoPointer())

	if cret == 0 {
		return nil
	}
	gobject.IncreaseRef(cret)
	cls = &gtk.PageSetup{}
	cls.Ptr = cret
	return cls
}

var xPrintOperationGetPrintSettings func(uintptr) uintptr

// Return the current print settings of @print_operation.
//
// It returns %NULL until
// either webkit_print_operation_set_print_settings() or webkit_print_operation_run_dialog()
// have been called.
func (x *PrintOperation) GetPrintSettings() *gtk.PrintSettings {
	var cls *gtk.PrintSettings

	cret := xPrintOperationGetPrintSettings(x.GoPointer())

	if cret == 0 {
		return nil
	}
	gobject.IncreaseRef(cret)
	cls = &gtk.PrintSettings{}
	cls.Ptr = cret
	return cls
}

var xPrintOperationPrint func(uintptr)

// Start a print operation using current print settings and page setup.
//
// Start a print operation using current print settings and page setup
// without showing the print dialog. If either print settings or page setup
// are not set with webkit_print_operation_set_print_settings() and
// webkit_print_operation_set_page_setup(), the default options will be used
// and the print job will be sent to the default printer.
// The #WebKitPrintOperation::finished signal is emitted when the printing
// operation finishes. If an error occurs while printing the signal
// #WebKitPrintOperation::failed is emitted before #WebKitPrintOperation::finished.
//
// If the app is running in a sandbox, this function only works if printing to
// a file that is in a location accessible to the sandbox, usually acquired
// through the File Chooser portal. This function will not work for physical
// printers when running in a sandbox.
func (x *PrintOperation) Print() {

	xPrintOperationPrint(x.GoPointer())

}

var xPrintOperationRunDialog func(uintptr, uintptr) PrintOperationResponse

// Run the print dialog and start printing.
//
// Run the print dialog and start printing using the options selected by
// the user. This method returns when the print dialog is closed.
// If the print dialog is cancelled %WEBKIT_PRINT_OPERATION_RESPONSE_CANCEL
// is returned. If the user clicks on the print button, %WEBKIT_PRINT_OPERATION_RESPONSE_PRINT
// is returned and the print operation starts. In this case, the #WebKitPrintOperation::finished
// signal is emitted when the operation finishes. If an error occurs while printing, the signal
// #WebKitPrintOperation::failed is emitted before #WebKitPrintOperation::finished.
// If the print dialog is not cancelled current print settings and page setup of @print_operation
// are updated with options selected by the user when Print button is pressed in print dialog.
// You can get the updated print settings and page setup by calling
// webkit_print_operation_get_print_settings() and webkit_print_operation_get_page_setup()
// after this method.
func (x *PrintOperation) RunDialog(ParentVar *gtk.Window) PrintOperationResponse {

	cret := xPrintOperationRunDialog(x.GoPointer(), ParentVar.GoPointer())

	return cret
}

var xPrintOperationSetPageSetup func(uintptr, uintptr)

// Set the current page setup of @print_operation.
//
// Current page setup is used for the
// initial values of the print dialog when webkit_print_operation_run_dialog() is called.
func (x *PrintOperation) SetPageSetup(PageSetupVar *gtk.PageSetup) {

	xPrintOperationSetPageSetup(x.GoPointer(), PageSetupVar.GoPointer())

}

var xPrintOperationSetPrintSettings func(uintptr, uintptr)

// Set the current print settings of @print_operation.
//
// Set the current print settings of @print_operation. Current print settings are used for
// the initial values of the print dialog when webkit_print_operation_run_dialog() is called.
func (x *PrintOperation) SetPrintSettings(PrintSettingsVar *gtk.PrintSettings) {

	xPrintOperationSetPrintSettings(x.GoPointer(), PrintSettingsVar.GoPointer())

}

func (c *PrintOperation) GoPointer() uintptr {
	if c == nil {
		return 0
	}
	return c.Ptr
}

func (c *PrintOperation) SetGoPointer(ptr uintptr) {
	c.Ptr = ptr
}

// Emitted when an error occurs while printing. The given @error, of the domain
// %WEBKIT_PRINT_ERROR, contains further details of the failure.
// The #WebKitPrintOperation::finished signal is emitted after this one.
func (x *PrintOperation) ConnectFailed(cb *func(PrintOperation, uintptr)) uint32 {
	cbPtr := uintptr(unsafe.Pointer(cb))
	if cbRefPtr, ok := glib.GetCallback(cbPtr); ok {
		return gobject.SignalConnect(x.GoPointer(), "failed", cbRefPtr)
	}

	fcb := func(clsPtr uintptr, ErrorVarp uintptr) {
		fa := PrintOperation{}
		fa.Ptr = clsPtr
		cbFn := *cb

		cbFn(fa, ErrorVarp)

	}
	cbRefPtr := purego.NewCallback(fcb)
	glib.SaveCallbackWithClosure(cbPtr, cbRefPtr, cb)
	return gobject.SignalConnect(x.GoPointer(), "failed", cbRefPtr)
}

// Emitted when the print operation has finished doing everything
// required for printing.
func (x *PrintOperation) ConnectFinished(cb *func(PrintOperation)) uint32 {
	cbPtr := uintptr(unsafe.Pointer(cb))
	if cbRefPtr, ok := glib.GetCallback(cbPtr); ok {
		return gobject.SignalConnect(x.GoPointer(), "finished", cbRefPtr)
	}

	fcb := func(clsPtr uintptr) {
		fa := PrintOperation{}
		fa.Ptr = clsPtr
		cbFn := *cb

		cbFn(fa)

	}
	cbRefPtr := purego.NewCallback(fcb)
	glib.SaveCallbackWithClosure(cbPtr, cbRefPtr, cb)
	return gobject.SignalConnect(x.GoPointer(), "finished", cbRefPtr)
}

func init() {
	core.SetPackageName("WEBKIT", "webkitgtk-6.0")
	core.SetSharedLibraries("WEBKIT", []string{"libwebkitgtk-6.0.so.4", "libjavascriptcoregtk-6.0.so.1"})
	var libs []uintptr
	for _, libPath := range core.GetPaths("WEBKIT") {
		lib, err := purego.Dlopen(libPath, purego.RTLD_NOW|purego.RTLD_GLOBAL)
		if err != nil {
			panic(err)
		}
		libs = append(libs, lib)
	}

	core.PuregoSafeRegister(&xPrintOperationResponseGLibType, libs, "webkit_print_operation_response_get_type")

	core.PuregoSafeRegister(&xPrintOperationGLibType, libs, "webkit_print_operation_get_type")

	core.PuregoSafeRegister(&xNewPrintOperation, libs, "webkit_print_operation_new")

	core.PuregoSafeRegister(&xPrintOperationGetPageSetup, libs, "webkit_print_operation_get_page_setup")
	core.PuregoSafeRegister(&xPrintOperationGetPrintSettings, libs, "webkit_print_operation_get_print_settings")
	core.PuregoSafeRegister(&xPrintOperationPrint, libs, "webkit_print_operation_print")
	core.PuregoSafeRegister(&xPrintOperationRunDialog, libs, "webkit_print_operation_run_dialog")
	core.PuregoSafeRegister(&xPrintOperationSetPageSetup, libs, "webkit_print_operation_set_page_setup")
	core.PuregoSafeRegister(&xPrintOperationSetPrintSettings, libs, "webkit_print_operation_set_print_settings")

}
