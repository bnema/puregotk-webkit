// Package webkit was automatically generated by github.com/jwijenbergh/puregotk DO NOT EDIT
package webkit

import (
	"structs"
	"unsafe"

	"github.com/jwijenbergh/purego"
	"github.com/jwijenbergh/puregotk/pkg/core"
	"github.com/jwijenbergh/puregotk/v4/gobject"
	"github.com/jwijenbergh/puregotk/v4/gobject/types"
	"github.com/jwijenbergh/puregotk/v4/gtk"
)

type FileChooserRequestClass struct {
	_ structs.HostLayout

	ParentClass gobject.ObjectClass
}

func (x *FileChooserRequestClass) GoPointer() uintptr {
	return uintptr(unsafe.Pointer(x))
}

// A request to open a file chooser.
//
// Whenever the user interacts with an HTML input element with
// file type, WebKit will need to show a dialog to choose one or
// more files to be uploaded to the server along with the rest of the
// form data. For that to happen in a general way, instead of just
// opening a #GtkFileChooserDialog (which might be not desirable in
// some cases, which could prefer to use their own file chooser
// dialog), WebKit will fire the #WebKitWebView::run-file-chooser
// signal with a #WebKitFileChooserRequest object, which will allow
// the client application to specify the files to be selected, to
// inspect the details of the request (e.g. if multiple selection
// should be allowed) and to cancel the request, in case nothing was
// selected.
//
// In case the client application does not wish to handle this signal,
// WebKit will provide a default handler which will asynchronously run
// a regular #GtkFileChooserDialog for the user to interact with.
type FileChooserRequest struct {
	gobject.Object
}

var xFileChooserRequestGLibType func() types.GType

func FileChooserRequestGLibType() types.GType {
	return xFileChooserRequestGLibType()
}

func FileChooserRequestNewFromInternalPtr(ptr uintptr) *FileChooserRequest {
	cls := &FileChooserRequest{}
	cls.Ptr = ptr
	return cls
}

var xFileChooserRequestCancel func(uintptr)

// Ask WebKit to cancel the request.
//
// It's important to do this in case
// no selection has been made in the client, otherwise the request
// won't be properly completed and the browser will keep the request
// pending forever, which might cause the browser to hang.
func (x *FileChooserRequest) Cancel() {

	xFileChooserRequestCancel(x.GoPointer())

}

var xFileChooserRequestGetMimeTypes func(uintptr) []string

// Get the list of MIME types the file chooser dialog should handle.
//
// Get the list of MIME types the file chooser dialog should handle,
// in the format specified in RFC 2046 for "media types". Its contents
// depend on the value of the 'accept' attribute for HTML input
// elements. This function should normally be called before presenting
// the file chooser dialog to the user, to decide whether to allow the
// user to select multiple files at once or only one.
func (x *FileChooserRequest) GetMimeTypes() []string {

	cret := xFileChooserRequestGetMimeTypes(x.GoPointer())

	return cret
}

var xFileChooserRequestGetMimeTypesFilter func(uintptr) uintptr

// Get the filter currently associated with the request.
//
// Get the filter currently associated with the request, ready to be
// used by #GtkFileChooser. This function should normally be called
// before presenting the file chooser dialog to the user, to decide
// whether to apply a filter so the user would not be allowed to
// select files with other MIME types.
//
// See webkit_file_chooser_request_get_mime_types() if you are
// interested in getting the list of accepted MIME types.
func (x *FileChooserRequest) GetMimeTypesFilter() *gtk.FileFilter {
	var cls *gtk.FileFilter

	cret := xFileChooserRequestGetMimeTypesFilter(x.GoPointer())

	if cret == 0 {
		return nil
	}
	gobject.IncreaseRef(cret)
	cls = &gtk.FileFilter{}
	cls.Ptr = cret
	return cls
}

var xFileChooserRequestGetSelectMultiple func(uintptr) bool

// Whether the file chooser should allow selecting multiple files.
//
// Determine whether the file chooser associated to this
// #WebKitFileChooserRequest should allow selecting multiple files,
// which depends on the HTML input element having a 'multiple'
// attribute defined.
func (x *FileChooserRequest) GetSelectMultiple() bool {

	cret := xFileChooserRequestGetSelectMultiple(x.GoPointer())

	return cret
}

var xFileChooserRequestGetSelectedFiles func(uintptr) []string

// Get the list of selected files associated to the request.
//
// Get the list of selected files currently associated to the
// request. Initially, the return value of this method contains any
// files selected in previous file chooser requests for this HTML
// input element. Once webkit_file_chooser_request_select_files, the
// value will reflect whatever files are given.
//
// This function should normally be called only before presenting the
// file chooser dialog to the user, to decide whether to perform some
// extra action, like pre-selecting the files from a previous request.
func (x *FileChooserRequest) GetSelectedFiles() []string {

	cret := xFileChooserRequestGetSelectedFiles(x.GoPointer())

	return cret
}

var xFileChooserRequestSelectFiles func(uintptr, []string)

// Ask WebKit to select local files for upload and complete the
// request.
func (x *FileChooserRequest) SelectFiles(FilesVar []string) {

	xFileChooserRequestSelectFiles(x.GoPointer(), FilesVar)

}

func (c *FileChooserRequest) GoPointer() uintptr {
	if c == nil {
		return 0
	}
	return c.Ptr
}

func (c *FileChooserRequest) SetGoPointer(ptr uintptr) {
	c.Ptr = ptr
}

// GetPropertyMimeTypes gets the "mime-types" property.
// A %NULL-terminated array of strings containing the list of MIME
// types the file chooser dialog should handle. See
// webkit_file_chooser_request_get_mime_types() for more details.
func (x *FileChooserRequest) GetPropertyMimeTypes() []string {
	var v gobject.Value
	x.GetProperty("mime-types", &v)
	return core.GoStringSlice(v.GetBoxed())
}

// GetPropertySelectMultiple gets the "select-multiple" property.
// Whether the file chooser should allow selecting multiple
// files. See
// webkit_file_chooser_request_get_select_multiple() for
// more details.
func (x *FileChooserRequest) GetPropertySelectMultiple() bool {
	var v gobject.Value
	x.GetProperty("select-multiple", &v)
	return v.GetBoolean()
}

// GetPropertySelectedFiles gets the "selected-files" property.
// A %NULL-terminated array of strings containing the list of
// selected files associated to the current request. See
// webkit_file_chooser_request_get_selected_files() for more details.
func (x *FileChooserRequest) GetPropertySelectedFiles() []string {
	var v gobject.Value
	x.GetProperty("selected-files", &v)
	return core.GoStringSlice(v.GetBoxed())
}

func init() {
	core.SetPackageName("WEBKIT", "webkitgtk-6.0")
	core.SetSharedLibraries("WEBKIT", []string{"libwebkitgtk-6.0.so.4", "libjavascriptcoregtk-6.0.so.1"})
	var libs []uintptr
	for _, libPath := range core.GetPaths("WEBKIT") {
		lib, err := purego.Dlopen(libPath, purego.RTLD_NOW|purego.RTLD_GLOBAL)
		if err != nil {
			panic(err)
		}
		libs = append(libs, lib)
	}

	core.PuregoSafeRegister(&xFileChooserRequestGLibType, libs, "webkit_file_chooser_request_get_type")

	core.PuregoSafeRegister(&xFileChooserRequestCancel, libs, "webkit_file_chooser_request_cancel")
	core.PuregoSafeRegister(&xFileChooserRequestGetMimeTypes, libs, "webkit_file_chooser_request_get_mime_types")
	core.PuregoSafeRegister(&xFileChooserRequestGetMimeTypesFilter, libs, "webkit_file_chooser_request_get_mime_types_filter")
	core.PuregoSafeRegister(&xFileChooserRequestGetSelectMultiple, libs, "webkit_file_chooser_request_get_select_multiple")
	core.PuregoSafeRegister(&xFileChooserRequestGetSelectedFiles, libs, "webkit_file_chooser_request_get_selected_files")
	core.PuregoSafeRegister(&xFileChooserRequestSelectFiles, libs, "webkit_file_chooser_request_select_files")

}
