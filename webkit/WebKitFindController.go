// Package webkit was automatically generated by github.com/jwijenbergh/puregotk DO NOT EDIT
package webkit

import (
	"structs"
	"unsafe"

	"github.com/jwijenbergh/purego"
	"github.com/jwijenbergh/puregotk/pkg/core"
	"github.com/jwijenbergh/puregotk/v4/glib"
	"github.com/jwijenbergh/puregotk/v4/gobject"
	"github.com/jwijenbergh/puregotk/v4/gobject/types"
)

type FindControllerClass struct {
	_ structs.HostLayout

	ParentClass gobject.ObjectClass
}

func (x *FindControllerClass) GoPointer() uintptr {
	return uintptr(unsafe.Pointer(x))
}

// Enum values used to specify search options.
type FindOptions int

var xFindOptionsGLibType func() types.GType

func FindOptionsGLibType() types.GType {
	return xFindOptionsGLibType()
}

const (

	// no search flags, this means a case
	//   sensitive, no wrap, forward only search.
	FindOptionsNoneValue FindOptions = 0
	// case insensitive search.
	FindOptionsCaseInsensitiveValue FindOptions = 1
	// search text only at the
	//   begining of the words.
	FindOptionsAtWordStartsValue FindOptions = 2
	// treat
	//   capital letters in the middle of words as word start.
	FindOptionsTreatMedialCapitalAsWordStartValue FindOptions = 4
	// search backwards.
	FindOptionsBackwardsValue FindOptions = 8
	// if not present search will stop
	//   at the end of the document.
	FindOptionsWrapAroundValue FindOptions = 16
)

// Controls text search in a #WebKitWebView.
//
// A #WebKitFindController is used to search text in a #WebKitWebView. You
// can get a #WebKitWebView&lt;!-- --&gt;'s #WebKitFindController with
// webkit_web_view_get_find_controller(), and later use it to search
// for text using webkit_find_controller_search(), or get the
// number of matches using webkit_find_controller_count_matches(). The
// operations are asynchronous and trigger signals when ready, such as
// #WebKitFindController::found-text,
// #WebKitFindController::failed-to-find-text or
// #WebKitFindController::counted-matches&lt;!-- --&gt;.
type FindController struct {
	gobject.Object
}

var xFindControllerGLibType func() types.GType

func FindControllerGLibType() types.GType {
	return xFindControllerGLibType()
}

func FindControllerNewFromInternalPtr(ptr uintptr) *FindController {
	cls := &FindController{}
	cls.Ptr = ptr
	return cls
}

var xFindControllerCountMatches func(uintptr, string, uint32, uint)

// Counts the number of matches for @search_text.
//
// Counts the number of matches for @search_text found in the
// #WebKitWebView with the provided @find_options. The number of
// matches will be provided by the
// #WebKitFindController::counted-matches signal.
func (x *FindController) CountMatches(SearchTextVar string, FindOptionsVar uint32, MaxMatchCountVar uint) {

	xFindControllerCountMatches(x.GoPointer(), SearchTextVar, FindOptionsVar, MaxMatchCountVar)

}

var xFindControllerGetMaxMatchCount func(uintptr) uint

// Gets the maximum number of matches to report.
//
// Gets the maximum number of matches to report during a text
// lookup. This number is passed as the last argument of
// webkit_find_controller_search() or
// webkit_find_controller_count_matches().
func (x *FindController) GetMaxMatchCount() uint {

	cret := xFindControllerGetMaxMatchCount(x.GoPointer())

	return cret
}

var xFindControllerGetOptions func(uintptr) uint32

// Gets the #WebKitFindOptions for the current search.
//
// Gets a bitmask containing the #WebKitFindOptions associated with
// the current search.
func (x *FindController) GetOptions() uint32 {

	cret := xFindControllerGetOptions(x.GoPointer())

	return cret
}

var xFindControllerGetSearchText func(uintptr) string

// Gets the text that @find_controller is searching for.
//
// Gets the text that @find_controller is currently searching
// for. This text is passed to either
// webkit_find_controller_search() or
// webkit_find_controller_count_matches().
func (x *FindController) GetSearchText() string {

	cret := xFindControllerGetSearchText(x.GoPointer())

	return cret
}

var xFindControllerGetWebView func(uintptr) uintptr

// Gets the #WebKitWebView this find controller is associated to.
//
// Do
// not dereference the returned instance as it belongs to the
// #WebKitFindController.
func (x *FindController) GetWebView() *WebView {
	var cls *WebView

	cret := xFindControllerGetWebView(x.GoPointer())

	if cret == 0 {
		return nil
	}
	gobject.IncreaseRef(cret)
	cls = &WebView{}
	cls.Ptr = cret
	return cls
}

var xFindControllerSearch func(uintptr, string, uint32, uint)

// Looks for @search_text associated with @find_controller.
//
// Looks for @search_text in the #WebKitWebView associated with
// @find_controller since the beginning of the document highlighting
// up to @max_match_count matches. The outcome of the search will be
// asynchronously provided by the #WebKitFindController::found-text
// and #WebKitFindController::failed-to-find-text signals.
//
// To look for the next or previous occurrences of the same text
// with the same find options use webkit_find_controller_search_next()
// and/or webkit_find_controller_search_previous(). The
// #WebKitFindController will use the same text and options for the
// following searches unless they are modified by another call to this
// method.
//
// Note that if the number of matches is higher than @max_match_count
// then #WebKitFindController::found-text will report %G_MAXUINT matches
// instead of the actual number.
//
// Callers should call webkit_find_controller_search_finish() to
// finish the current search operation.
func (x *FindController) Search(SearchTextVar string, FindOptionsVar uint32, MaxMatchCountVar uint) {

	xFindControllerSearch(x.GoPointer(), SearchTextVar, FindOptionsVar, MaxMatchCountVar)

}

var xFindControllerSearchFinish func(uintptr)

// Finishes a find operation.
//
// Finishes a find operation started by
// webkit_find_controller_search(). It will basically unhighlight
// every text match found.
//
// This method will be typically called when the search UI is
// closed/hidden by the client application.
func (x *FindController) SearchFinish() {

	xFindControllerSearchFinish(x.GoPointer())

}

var xFindControllerSearchNext func(uintptr)

// Looks for the next occurrence of the search text.
//
// Calling this method before webkit_find_controller_search() or
// webkit_find_controller_count_matches() is a programming error.
func (x *FindController) SearchNext() {

	xFindControllerSearchNext(x.GoPointer())

}

var xFindControllerSearchPrevious func(uintptr)

// Looks for the previous occurrence of the search text.
//
// Calling this method before webkit_find_controller_search() or
// webkit_find_controller_count_matches() is a programming error.
func (x *FindController) SearchPrevious() {

	xFindControllerSearchPrevious(x.GoPointer())

}

func (c *FindController) GoPointer() uintptr {
	if c == nil {
		return 0
	}
	return c.Ptr
}

func (c *FindController) SetGoPointer(ptr uintptr) {
	c.Ptr = ptr
}

// GetPropertyMaxMatchCount gets the "max-match-count" property.
// The maximum number of matches to report for a given search.
func (x *FindController) GetPropertyMaxMatchCount() uint {
	var v gobject.Value
	x.GetProperty("max-match-count", &v)
	return v.GetUint()
}

// GetPropertyText gets the "text" property.
// The current search text for this #WebKitFindController.
func (x *FindController) GetPropertyText() string {
	var v gobject.Value
	x.GetProperty("text", &v)
	return v.GetString()
}

// This signal is emitted when the #WebKitFindController has
// counted the number of matches for a given text after a call
// to webkit_find_controller_count_matches().
func (x *FindController) ConnectCountedMatches(cb *func(FindController, uint)) uint {
	cbPtr := uintptr(unsafe.Pointer(cb))
	if cbRefPtr, ok := glib.GetCallback(cbPtr); ok {
		handlerID := gobject.SignalConnect(x.GoPointer(), "counted-matches", cbRefPtr)
		glib.SaveHandlerMapping(handlerID, cbPtr)
		return handlerID
	}

	fcb := func(clsPtr uintptr, MatchCountVarp uint) {
		fa := FindController{}
		fa.Ptr = clsPtr
		cbFn := *cb

		cbFn(fa, MatchCountVarp)

	}
	cbRefPtr := purego.NewCallback(fcb)
	glib.SaveCallbackWithClosure(cbPtr, cbRefPtr, cb)
	handlerID := gobject.SignalConnect(x.GoPointer(), "counted-matches", cbRefPtr)
	glib.SaveHandlerMapping(handlerID, cbPtr)
	return handlerID
}

// This signal is emitted when a search operation does not find
// any result for the given text. It will be issued if the text
// is not found asynchronously after a call to
// webkit_find_controller_search(), webkit_find_controller_search_next()
// or webkit_find_controller_search_previous().
func (x *FindController) ConnectFailedToFindText(cb *func(FindController)) uint {
	cbPtr := uintptr(unsafe.Pointer(cb))
	if cbRefPtr, ok := glib.GetCallback(cbPtr); ok {
		handlerID := gobject.SignalConnect(x.GoPointer(), "failed-to-find-text", cbRefPtr)
		glib.SaveHandlerMapping(handlerID, cbPtr)
		return handlerID
	}

	fcb := func(clsPtr uintptr) {
		fa := FindController{}
		fa.Ptr = clsPtr
		cbFn := *cb

		cbFn(fa)

	}
	cbRefPtr := purego.NewCallback(fcb)
	glib.SaveCallbackWithClosure(cbPtr, cbRefPtr, cb)
	handlerID := gobject.SignalConnect(x.GoPointer(), "failed-to-find-text", cbRefPtr)
	glib.SaveHandlerMapping(handlerID, cbPtr)
	return handlerID
}

// This signal is emitted when a given text is found in the web
// page text. It will be issued if the text is found
// asynchronously after a call to webkit_find_controller_search(),
// webkit_find_controller_search_next() or
// webkit_find_controller_search_previous().
func (x *FindController) ConnectFoundText(cb *func(FindController, uint)) uint {
	cbPtr := uintptr(unsafe.Pointer(cb))
	if cbRefPtr, ok := glib.GetCallback(cbPtr); ok {
		handlerID := gobject.SignalConnect(x.GoPointer(), "found-text", cbRefPtr)
		glib.SaveHandlerMapping(handlerID, cbPtr)
		return handlerID
	}

	fcb := func(clsPtr uintptr, MatchCountVarp uint) {
		fa := FindController{}
		fa.Ptr = clsPtr
		cbFn := *cb

		cbFn(fa, MatchCountVarp)

	}
	cbRefPtr := purego.NewCallback(fcb)
	glib.SaveCallbackWithClosure(cbPtr, cbRefPtr, cb)
	handlerID := gobject.SignalConnect(x.GoPointer(), "found-text", cbRefPtr)
	glib.SaveHandlerMapping(handlerID, cbPtr)
	return handlerID
}

func init() {
	core.SetPackageName("WEBKIT", "webkitgtk-6.0")
	core.SetSharedLibraries("WEBKIT", []string{"libwebkitgtk-6.0.so.4", "libjavascriptcoregtk-6.0.so.1"})
	var libs []uintptr
	for _, libPath := range core.GetPaths("WEBKIT") {
		lib, err := purego.Dlopen(libPath, purego.RTLD_NOW|purego.RTLD_GLOBAL)
		if err != nil {
			panic(err)
		}
		libs = append(libs, lib)
	}

	core.PuregoSafeRegister(&xFindOptionsGLibType, libs, "webkit_find_options_get_type")

	core.PuregoSafeRegister(&xFindControllerGLibType, libs, "webkit_find_controller_get_type")

	core.PuregoSafeRegister(&xFindControllerCountMatches, libs, "webkit_find_controller_count_matches")
	core.PuregoSafeRegister(&xFindControllerGetMaxMatchCount, libs, "webkit_find_controller_get_max_match_count")
	core.PuregoSafeRegister(&xFindControllerGetOptions, libs, "webkit_find_controller_get_options")
	core.PuregoSafeRegister(&xFindControllerGetSearchText, libs, "webkit_find_controller_get_search_text")
	core.PuregoSafeRegister(&xFindControllerGetWebView, libs, "webkit_find_controller_get_web_view")
	core.PuregoSafeRegister(&xFindControllerSearch, libs, "webkit_find_controller_search")
	core.PuregoSafeRegister(&xFindControllerSearchFinish, libs, "webkit_find_controller_search_finish")
	core.PuregoSafeRegister(&xFindControllerSearchNext, libs, "webkit_find_controller_search_next")
	core.PuregoSafeRegister(&xFindControllerSearchPrevious, libs, "webkit_find_controller_search_previous")

}
