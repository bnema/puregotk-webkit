// Code generated by puregotk-webkit extras; DO NOT EDIT.
package webkit

import (
	"github.com/jwijenbergh/puregotk/v4/gobject"
)

// WebContextOptions contains construct-only properties for creating a WebContext.
// All fields are optional - only non-nil values will be applied.
type WebContextOptions struct {
	// MemoryPressureSettings configures memory limits and thresholds for web processes.
	MemoryPressureSettings *MemoryPressureSettings

	// TimeZoneOverride sets the timezone for all webviews in this context.
	// Expected values are IANA timezone database identifiers (e.g. "America/New_York").
	TimeZoneOverride string
}

// NewWebContextWithOptions creates a new WebContext with the specified construct-only properties.
// This is necessary because properties like "memory-pressure-settings" can only be set at construction time.
func NewWebContextWithOptions(opts *WebContextOptions) *WebContext {
	if opts == nil {
		return NewWebContext()
	}

	var names []string
	var values []gobject.Value

	if opts.MemoryPressureSettings != nil {
		var v gobject.Value
		// MemoryPressureSettings is a boxed type, use its GType and SetBoxed
		v.Init(MemoryPressureSettingsGLibType())
		v.SetBoxed(opts.MemoryPressureSettings.GoPointer())
		names = append(names, "memory-pressure-settings")
		values = append(values, v)
	}

	if opts.TimeZoneOverride != "" {
		var v gobject.Value
		v.Init(gobject.TypeStringVal)
		v.SetString(&opts.TimeZoneOverride)
		names = append(names, "time-zone-override")
		values = append(values, v)
	}

	if len(names) == 0 {
		return NewWebContext()
	}

	obj := gobject.NewObjectWithProperties(
		WebContextGLibType(),
		uint(len(names)),
		names,
		values,
	)
	if obj == nil {
		return nil
	}

	ctx := &WebContext{}
	ctx.Ptr = obj.Ptr
	return ctx
}

// NewWebContextWithMemoryPressureSettings creates a new WebContext with memory pressure settings.
// This is a convenience wrapper around NewWebContextWithOptions for the common case of only
// setting memory pressure settings.
func NewWebContextWithMemoryPressureSettings(settings *MemoryPressureSettings) *WebContext {
	if settings == nil {
		return NewWebContext()
	}
	return NewWebContextWithOptions(&WebContextOptions{MemoryPressureSettings: settings})
}
