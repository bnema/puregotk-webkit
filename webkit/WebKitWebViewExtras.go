// Code generated by puregotk-webkit extras; DO NOT EDIT.
package webkit

import (
	"github.com/jwijenbergh/puregotk/v4/gobject"
)

// NewWebViewWithRelatedView creates a new WebView that shares the same
// WebContext and NetworkSession as the provided related view. This is required
// for popup windows (window.open/target=_blank) to share cookies/session data.
func NewWebViewWithRelatedView(relatedView *WebView) *WebView {
	if relatedView == nil {
		return NewWebView()
	}

	var relatedValue gobject.Value
	relatedValue.Init(WebViewGLibType())
	parentObj := gobject.Object{Ptr: relatedView.GoPointer()}
	relatedValue.SetObject(&parentObj)

	obj := gobject.NewObjectWithProperties(
		WebViewGLibType(),
		1,
		[]string{"related-view"},
		[]gobject.Value{relatedValue},
	)
	if obj == nil {
		return nil
	}

	gobject.IncreaseRef(obj.GoPointer())

	view := &WebView{}
	view.Ptr = obj.Ptr
	return view
}

// NavigationActionFromPointer wraps a raw pointer from the "create" signal into
// a NavigationAction copy so callers don't need unsafe in their code. The
// returned NavigationAction should be freed with (*NavigationAction).Free() when
// no longer needed.
func NavigationActionFromPointer(ptr uintptr) *NavigationAction {
	if ptr == 0 {
		return nil
	}
	return xNavigationActionCopy(ptr)
}
