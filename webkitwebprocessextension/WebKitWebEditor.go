// Package webkitwebprocessextension was automatically generated by github.com/jwijenbergh/puregotk DO NOT EDIT
package webkitwebprocessextension

import (
	"structs"
	"unsafe"

	"github.com/jwijenbergh/purego"
	"github.com/jwijenbergh/puregotk/pkg/core"
	"github.com/jwijenbergh/puregotk/v4/glib"
	"github.com/jwijenbergh/puregotk/v4/gobject"
	"github.com/jwijenbergh/puregotk/v4/gobject/types"
)

type WebEditorClass struct {
	_ structs.HostLayout

	ParentClass gobject.ObjectClass
}

func (x *WebEditorClass) GoPointer() uintptr {
	return uintptr(unsafe.Pointer(x))
}

// Access to editing capabilities of a #WebKitWebPage.
//
// The WebKitWebEditor provides access to various editing capabilities of
// a #WebKitWebPage such as a possibility to react to the current selection in
// #WebKitWebPage.
type WebEditor struct {
	gobject.Object
}

var xWebEditorGLibType func() types.GType

func WebEditorGLibType() types.GType {
	return xWebEditorGLibType()
}

func WebEditorNewFromInternalPtr(ptr uintptr) *WebEditor {
	cls := &WebEditor{}
	cls.Ptr = ptr
	return cls
}

var xWebEditorGetPage func(uintptr) uintptr

// Gets the #WebKitWebPage that is associated with the #WebKitWebEditor.
func (x *WebEditor) GetPage() *WebPage {
	var cls *WebPage

	cret := xWebEditorGetPage(x.GoPointer())

	if cret == 0 {
		return nil
	}
	gobject.IncreaseRef(cret)
	cls = &WebPage{}
	cls.Ptr = cret
	return cls
}

func (c *WebEditor) GoPointer() uintptr {
	if c == nil {
		return 0
	}
	return c.Ptr
}

func (c *WebEditor) SetGoPointer(ptr uintptr) {
	c.Ptr = ptr
}

// This signal is emitted for every selection change inside a #WebKitWebPage
// as well as for every caret position change as the caret is a collapsed
// selection.
func (x *WebEditor) ConnectSelectionChanged(cb *func(WebEditor)) uint32 {
	cbPtr := uintptr(unsafe.Pointer(cb))
	if cbRefPtr, ok := glib.GetCallback(cbPtr); ok {
		return gobject.SignalConnect(x.GoPointer(), "selection-changed", cbRefPtr)
	}

	fcb := func(clsPtr uintptr) {
		fa := WebEditor{}
		fa.Ptr = clsPtr
		cbFn := *cb

		cbFn(fa)

	}
	cbRefPtr := purego.NewCallback(fcb)
	glib.SaveCallbackWithClosure(cbPtr, cbRefPtr, cb)
	return gobject.SignalConnect(x.GoPointer(), "selection-changed", cbRefPtr)
}

func init() {
	core.SetPackageName("WEBKITWEBPROCESSEXTENSION", "webkitgtk-web-process-extension-6.0")
	core.SetSharedLibraries("WEBKITWEBPROCESSEXTENSION", []string{"libwebkitgtk-6.0.so.4", "libjavascriptcoregtk-6.0.so.1"})
	var libs []uintptr
	for _, libPath := range core.GetPaths("WEBKITWEBPROCESSEXTENSION") {
		lib, err := purego.Dlopen(libPath, purego.RTLD_NOW|purego.RTLD_GLOBAL)
		if err != nil {
			panic(err)
		}
		libs = append(libs, lib)
	}

	core.PuregoSafeRegister(&xWebEditorGLibType, libs, "webkit_web_editor_get_type")

	core.PuregoSafeRegister(&xWebEditorGetPage, libs, "webkit_web_editor_get_page")

}
