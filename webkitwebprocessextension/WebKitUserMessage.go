// Package webkitwebprocessextension was automatically generated by github.com/jwijenbergh/puregotk DO NOT EDIT
package webkitwebprocessextension

import (
	"structs"
	"unsafe"

	"github.com/jwijenbergh/purego"
	"github.com/jwijenbergh/puregotk/pkg/core"
	"github.com/jwijenbergh/puregotk/v4/gio"
	"github.com/jwijenbergh/puregotk/v4/glib"
	"github.com/jwijenbergh/puregotk/v4/gobject"
	"github.com/jwijenbergh/puregotk/v4/gobject/types"
)

type UserMessageClass struct {
	_ structs.HostLayout

	ParentClass gobject.InitiallyUnownedClass
}

func (x *UserMessageClass) GoPointer() uintptr {
	return uintptr(unsafe.Pointer(x))
}

// Enum values used to denote errors happening when sending user messages.
type UserMessageError int

const (

	// The message was not handled by the receiver.
	WebkitUserMessageUnhandledMessageValue UserMessageError = 0
)

// Message that can be sent between the UI process and web process extensions.
//
// A WebKitUserMessage is a message that can be used for the communication between the UI process
// and web process extensions. A WebKitUserMessage always has a name, and it can also include parameters and
// UNIX file descriptors. Messages can be sent from a #WebKitWebContext to all web process extensions,
// from a web process extension to its corresponding #WebKitWebContext, and from a #WebKitWebView to its
// corresponding #WebKitWebPage (and vice versa). One to one messages can be replied to directly with
// webkit_user_message_send_reply().
type UserMessage struct {
	gobject.InitiallyUnowned
}

var xUserMessageGLibType func() types.GType

func UserMessageGLibType() types.GType {
	return xUserMessageGLibType()
}

func UserMessageNewFromInternalPtr(ptr uintptr) *UserMessage {
	cls := &UserMessage{}
	cls.Ptr = ptr
	return cls
}

var xNewUserMessage func(string, *glib.Variant) uintptr

// Create a new #WebKitUserMessage with @name.
func NewUserMessage(NameVar string, ParametersVar *glib.Variant) *UserMessage {
	var cls *UserMessage

	cret := xNewUserMessage(NameVar, ParametersVar)

	if cret == 0 {
		return nil
	}
	gobject.IncreaseRef(cret)
	cls = &UserMessage{}
	cls.Ptr = cret
	return cls
}

var xNewUserMessageWithFdList func(string, *glib.Variant, uintptr) uintptr

// Create a new #WebKitUserMessage including also a list of UNIX file descriptors to be sent.
func NewUserMessageWithFdList(NameVar string, ParametersVar *glib.Variant, FdListVar *gio.UnixFDList) *UserMessage {
	var cls *UserMessage

	cret := xNewUserMessageWithFdList(NameVar, ParametersVar, FdListVar.GoPointer())

	if cret == 0 {
		return nil
	}
	gobject.IncreaseRef(cret)
	cls = &UserMessage{}
	cls.Ptr = cret
	return cls
}

var xUserMessageGetFdList func(uintptr) uintptr

// Get the @message list of file descritpor.
func (x *UserMessage) GetFdList() *gio.UnixFDList {
	var cls *gio.UnixFDList

	cret := xUserMessageGetFdList(x.GoPointer())

	if cret == 0 {
		return nil
	}
	gobject.IncreaseRef(cret)
	cls = &gio.UnixFDList{}
	cls.Ptr = cret
	return cls
}

var xUserMessageGetName func(uintptr) string

// Get the @message name.
func (x *UserMessage) GetName() string {

	cret := xUserMessageGetName(x.GoPointer())

	return cret
}

var xUserMessageGetParameters func(uintptr) *glib.Variant

// Get the @message parameters.
func (x *UserMessage) GetParameters() *glib.Variant {

	cret := xUserMessageGetParameters(x.GoPointer())

	return cret
}

var xUserMessageSendReply func(uintptr, uintptr)

// Send a reply to an user message.
//
// If @reply is floating, it's consumed.
// You can only send a reply to a #WebKitUserMessage that has been
// received.
func (x *UserMessage) SendReply(ReplyVar *UserMessage) {

	xUserMessageSendReply(x.GoPointer(), ReplyVar.GoPointer())

}

func (c *UserMessage) GoPointer() uintptr {
	if c == nil {
		return 0
	}
	return c.Ptr
}

func (c *UserMessage) SetGoPointer(ptr uintptr) {
	c.Ptr = ptr
}

// SetPropertyName sets the "name" property.
// The name of the user message.
func (x *UserMessage) SetPropertyName(value string) {
	var v gobject.Value
	v.Init(gobject.TypeStringVal)
	v.SetString(&value)
	x.SetProperty("name", &v)
}

// GetPropertyName gets the "name" property.
// The name of the user message.
func (x *UserMessage) GetPropertyName() string {
	var v gobject.Value
	x.GetProperty("name", &v)
	return v.GetString()
}

// SetPropertyParameters sets the "parameters" property.
// The parameters of the user message as a #GVariant, or %NULL
// if the message doesn't include parameters. Note that only complete types are
// allowed.
func (x *UserMessage) SetPropertyParameters(value uintptr) {
	var v gobject.Value
	v.Init(gobject.TypePointerVal)
	v.SetPointer(value)
	x.SetProperty("parameters", &v)
}

// GetPropertyParameters gets the "parameters" property.
// The parameters of the user message as a #GVariant, or %NULL
// if the message doesn't include parameters. Note that only complete types are
// allowed.
func (x *UserMessage) GetPropertyParameters() uintptr {
	var v gobject.Value
	x.GetProperty("parameters", &v)
	return v.GetPointer()
}

var xUserMessageErrorQuark func() glib.Quark

// Gets the quark for the domain of user message errors.
func UserMessageErrorQuark() glib.Quark {

	cret := xUserMessageErrorQuark()

	return cret
}

func init() {
	core.SetPackageName("WEBKITWEBPROCESSEXTENSION", "webkitgtk-web-process-extension-6.0")
	core.SetSharedLibraries("WEBKITWEBPROCESSEXTENSION", []string{"libwebkitgtk-6.0.so.4", "libjavascriptcoregtk-6.0.so.1"})
	var libs []uintptr
	for _, libPath := range core.GetPaths("WEBKITWEBPROCESSEXTENSION") {
		lib, err := purego.Dlopen(libPath, purego.RTLD_NOW|purego.RTLD_GLOBAL)
		if err != nil {
			panic(err)
		}
		libs = append(libs, lib)
	}

	core.PuregoSafeRegister(&xUserMessageGLibType, libs, "webkit_user_message_get_type")

	core.PuregoSafeRegister(&xNewUserMessage, libs, "webkit_user_message_new")
	core.PuregoSafeRegister(&xNewUserMessageWithFdList, libs, "webkit_user_message_new_with_fd_list")

	core.PuregoSafeRegister(&xUserMessageGetFdList, libs, "webkit_user_message_get_fd_list")
	core.PuregoSafeRegister(&xUserMessageGetName, libs, "webkit_user_message_get_name")
	core.PuregoSafeRegister(&xUserMessageGetParameters, libs, "webkit_user_message_get_parameters")
	core.PuregoSafeRegister(&xUserMessageSendReply, libs, "webkit_user_message_send_reply")

	core.PuregoSafeRegister(&xUserMessageErrorQuark, libs, "webkit_user_message_error_quark")

}
